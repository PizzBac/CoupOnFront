{"ast":null,"code":"var _jsxFileName = \"/Users/joshhartnett/ServerStomp/stomp/src/ServerQue/StompHookProps.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport StompHook from './StompHook';\nimport { StompSessionProvider } from 'react-stomp-hooks';\nimport Banker from '../front/banker';\nimport Console from '../front/console';\nimport Modal from '../front/modal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction StompHookProps() {\n  _s();\n  const subscription = \"/user/lobby\";\n  const [destination, setDestination] = useState(\"/app/create\");\n  const headers = JSON.stringify({\n    \"lobbyName\": \"Room1\"\n  });\n  const [body, setBody] = useState(\"Income\");\n  const [receivedMessage, setReceivedMessage] = useState(\"\");\n  const [showModal, setShowModal] = useState(false);\n  const [selectedContent, setSelectedContent] = useState(\"\");\n  const handleReceivedMessage = message => {\n    setReceivedMessage(message);\n    const messageObject = JSON.parse(message);\n    if (messageObject.type === \"CHOICE\") {\n      setSelectedContent(\"\");\n      setShowModal(true);\n    }\n  };\n  useEffect(() => {\n    if (typeof receivedMessage === 'string' && receivedMessage.trim().startsWith('{') && receivedMessage.trim().endsWith('}')) {\n      console.log('JSON형태입니다.');\n      const message = JSON.parse(receivedMessage);\n      console.log(message.content);\n    } else {\n      console.log('JSON형태가 아닙니다.');\n    }\n  }, [receivedMessage]);\n  const handleGameStart = () => {\n    setDestination(\"/app/game\");\n  };\n  const handleModalClose = () => {\n    setShowModal(false);\n  };\n  const handleContentSelect = content => {\n    setSelectedContent(content);\n    setShowModal(false);\n    const message = {\n      type: \"CHOICE\",\n      content: content\n    };\n    const headers = {\n      lobbyName: \"Room1\"\n    };\n    const messageBody = JSON.stringify(message);\n    StompHook.sendMessage(destination, headers, messageBody);\n  };\n  return /*#__PURE__*/_jsxDEV(StompSessionProvider, {\n    url: \"ws://javaspringbootcoupgamebackend-env.eba-2u3en2tr.ap-northeast-2.elasticbeanstalk.com/ws\",\n    children: [/*#__PURE__*/_jsxDEV(StompHook, {\n      subscription: subscription,\n      destination: destination,\n      headers: headers,\n      body: body,\n      onReceivedMessage: handleReceivedMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Banker, {\n      receivedMessage: receivedMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Console, {\n      destination: destination,\n      body: body,\n      setBody: setBody\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleGameStart,\n      children: \"\\uAC8C\\uC784 \\uC2A4\\uD0C0\\uD2B8\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), showModal && /*#__PURE__*/_jsxDEV(Modal, {\n      handleClose: handleModalClose,\n      children: [selectedContent === \"\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Please select an option:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 15\n        }, this), receivedMessage.content.map(option => /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleContentSelect(option),\n          children: option\n        }, option, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 17\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }, this), selectedContent !== \"\" && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"You have selected: \", selectedContent]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 38\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}\n_s(StompHookProps, \"0FNZlGzvf7LRBo3fonf9MfSH2M0=\");\n_c = StompHookProps;\nexport default StompHookProps;\nvar _c;\n$RefreshReg$(_c, \"StompHookProps\");","map":{"version":3,"names":["React","useState","StompHook","StompSessionProvider","Banker","Console","Modal","jsxDEV","_jsxDEV","StompHookProps","_s","subscription","destination","setDestination","headers","JSON","stringify","body","setBody","receivedMessage","setReceivedMessage","showModal","setShowModal","selectedContent","setSelectedContent","handleReceivedMessage","message","messageObject","parse","type","useEffect","trim","startsWith","endsWith","console","log","content","handleGameStart","handleModalClose","handleContentSelect","lobbyName","messageBody","sendMessage","url","children","onReceivedMessage","fileName","_jsxFileName","lineNumber","columnNumber","onClick","handleClose","map","option","_c","$RefreshReg$"],"sources":["/Users/joshhartnett/ServerStomp/stomp/src/ServerQue/StompHookProps.js"],"sourcesContent":["import React, { useState } from 'react';\nimport StompHook from './StompHook';\nimport { StompSessionProvider } from 'react-stomp-hooks';\nimport Banker from '../front/banker';\nimport Console from '../front/console';\nimport Modal from '../front/modal';\n\nfunction StompHookProps() {\n  const subscription = \"/user/lobby\";\n  const [destination, setDestination] = useState(\"/app/create\");\n  const headers = JSON.stringify({ \"lobbyName\": \"Room1\" });\n  const [body, setBody] = useState(\"Income\");\n  const [receivedMessage, setReceivedMessage] = useState(\"\");\n  const [showModal, setShowModal] = useState(false);\n  const [selectedContent, setSelectedContent] = useState(\"\");\n\n  const handleReceivedMessage = (message) => {\n    setReceivedMessage(message);\n\n    \n    const messageObject = JSON.parse(message);\n    if (messageObject.type === \"CHOICE\") {\n      setSelectedContent(\"\");\n      setShowModal(true);\n    }\n  };\n\n  useEffect(() => {\n    if (typeof receivedMessage === 'string' && receivedMessage.trim().startsWith('{') && receivedMessage.trim().endsWith('}')) {\n      console.log('JSON형태입니다.');\n      const message = JSON.parse(receivedMessage);\n      console.log(message.content);\n    } else {\n      console.log('JSON형태가 아닙니다.');\n    }\n  }, [receivedMessage]);\n  \n  const handleGameStart = () => {\n    setDestination(\"/app/game\");\n  }\n\n  const handleModalClose = () => {\n    setShowModal(false);\n  };\n\n  const handleContentSelect = (content) => {\n    setSelectedContent(content);\n    setShowModal(false);\n\n    const message = {\n      type: \"CHOICE\",\n      content: content\n    };\n\n    const headers = {\n      lobbyName: \"Room1\"\n    };\n\n    const messageBody = JSON.stringify(message);\n    StompHook.sendMessage(destination, headers, messageBody);\n  };\n\n  return (\n    <StompSessionProvider url=\"ws://javaspringbootcoupgamebackend-env.eba-2u3en2tr.ap-northeast-2.elasticbeanstalk.com/ws\">\n      <StompHook subscription={subscription} destination={destination} headers={headers} body={body} onReceivedMessage={handleReceivedMessage} />\n      <Banker receivedMessage={receivedMessage} />\n      <Console destination={destination} body={body} setBody={setBody} />\n      <button onClick={handleGameStart}>게임 스타트</button>\n      {showModal && (\n        <Modal handleClose={handleModalClose}>\n          {selectedContent === \"\" && (\n            <div>\n              <h2>Please select an option:</h2>\n              {receivedMessage.content.map((option) => (\n                <button key={option} onClick={() => handleContentSelect(option)}>\n                  {option}\n                </button>\n              ))}\n            </div>\n          )}\n          {selectedContent !== \"\" && <p>You have selected: {selectedContent}</p>}\n        </Modal>\n      )}\n    </StompSessionProvider>\n  );\n}\n\nexport default StompHookProps;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}